<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Safety Checker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header" style="display:flex; align-items:center; justify-content:space-between; gap:20px;">
            <div style="display:flex; align-items:center; gap:15px;">
                <div class="shield-icon">üõ°Ô∏è</div>
                <div>
                    <h1>URL Safety Checker</h1>
                    <p class="subtitle">Protect yourself from malicious websites</p>
                </div>
            </div>

            <div style="display:flex; align-items:center; gap:12px;">
                <div id="userEmail" style="color:#444; font-weight:600;"></div>
                <a id="authBtn" class="telegram-btn" href="login.html" style="padding:8px 16px; border-radius:12px; font-size:14px;">
                    Login
                </a>
                <a href="clock.html" class="telegram-btn" style="padding:8px 16px; border-radius:12px; font-size:14px;">
                    ‚è±Ô∏è Clock
                </a>
            </div>
        </div>

        <div class="features">
            <div class="feature">
                <div class="feature-icon">‚ö°</div>
                <div class="feature-text">Instant Check</div>
            </div>
            <div class="feature">
                <div class="feature-icon">üîí</div>
                <div class="feature-text">Secure Scan</div>
            </div>
            <div class="feature">
                <div class="feature-icon">‚úÖ</div>
                <div class="feature-text">Reliable</div>
            </div>
        </div>

        <div class="input-group">
            <input type="text" id="urlInput" placeholder="Enter URL">
        </div>

        <button class="check-btn" onclick="checkURL()">üîç Check URL Safety</button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 10px; color: #666;">Analyzing URL...</p>
        </div>

        <div class="result" id="result"></div>

        <div class="telegram-section">
            <p class="telegram-title">üí¨ Check URLs on Telegram</p>
            <a href="https://t.me/URL_Safety_Checker_bot" class="telegram-btn" target="_blank">
                <span class="telegram-icon">‚úàÔ∏è</span>
                <span>Open Telegram Bot</span>
            </a>
            <p style="margin-top: 15px; font-size: 14px; color: #666;">
                Our bot uses Google Safe Browsing API for instant URL verification
            </p>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="script.js"></script>

    <script>
        // Update UI based on auth state
        (function () {
            const authBtn = document.getElementById('authBtn');
            const userEmailSpan = document.getElementById('userEmail');

            function refreshAuthUI() {
                const user = getCurrentUser();
                if (user && user.email) {
                    userEmailSpan.textContent = user.email;
                    authBtn.textContent = 'Logout';
                    authBtn.href = '#';
                } else {
                    userEmailSpan.textContent = '';
                    authBtn.textContent = 'Login';
                    authBtn.href = 'login.html';
                }
            }

            authBtn.addEventListener('click', function (e) {
                const user = getCurrentUser();
                if (user && user.email) {
                    // Logout
                    e.preventDefault();
                    clearCurrentUser();
                    refreshAuthUI();
                    const result = document.getElementById('result');
                    result.innerHTML = 'üîì Logged out';
                    result.className = 'result show';
                    setTimeout(() => {
                        result.className = 'result';
                        result.innerHTML = '';
                    }, 1500);
                }
            });

            document.addEventListener('DOMContentLoaded', refreshAuthUI);
        })();
    </script>
</body>
</html>