<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Safety Checker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="site-header">
        <div class="header-inner container">
            <div class="brand">
                <div class="logo">üõ°Ô∏è</div>
                <div class="brand-text">
                    <h1>URL Safety Checker</h1>
                    <p class="tag">Protect yourself from malicious websites</p>
                </div>
            </div>

            <nav class="nav">
                <a href="index.html" class="nav-link">Home</a>
                <a href="clock.html" class="nav-link">World Clock</a>
                <a id="authBtn" class="btn btn-outline" href="login.html">Login</a>
            </nav>
        </div>
    </header>

    <main class="container main-grid">
        <section class="panel input-panel">
            <h2 class="panel-title">Check a URL</h2>
            <p class="lead">Quickly verify whether a link is potentially unsafe.</p>

            <div class="input-row">
                <input id="urlInput" type="text" placeholder="https://example.com" aria-label="URL input">
                <button class="btn btn-primary check-btn" onclick="checkURL()">Check</button>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <span class="loading-text">Analyzing...</span>
            </div>

            <div id="result" class="result" role="status" aria-live="polite"></div>
        </section>

        <aside class="panel info-panel">
            <h3>Why use this?</h3>
            <ul class="feature-list">
                <li>Fast, client-side checks for demo purposes</li>
                <li>Integration with Google Safe Browsing in the bot</li>
                <li>Quick patterns detection for common scams</li>
            </ul>

            <div class="telegram-card">
                <p class="small muted">Use the Telegram bot for bulk or automated checks</p>
                <a class="btn btn-telegram" href="https://t.me/URL_Safety_Checker_bot" target="_blank">Open Telegram Bot</a>
            </div>

            <div class="account-status">
                <span id="userEmail" class="muted"></span>
            </div>
        </aside>
    </main>

    <footer class="site-footer">
        <div class="container">
            <small>¬© 2025 URL Safety Checker ‚Äî Demo interface</small>
        </div>
    </footer>

    <script src="auth.js"></script>
    <script src="script.js"></script>

    <script>
        // Update UI based on auth state
        (function () {
            const authBtn = document.getElementById('authBtn');
            const userEmailSpan = document.getElementById('userEmail');

            function refreshAuthUI() {
                const user = getCurrentUser();
                if (user && user.email) {
                    userEmailSpan.textContent = user.email;
                    authBtn.textContent = 'Logout';
                    authBtn.classList.remove('btn-outline');
                    authBtn.classList.add('btn-danger');
                    authBtn.href = '#';
                } else {
                    userEmailSpan.textContent = '';
                    authBtn.textContent = 'Login';
                    authBtn.classList.remove('btn-danger');
                    authBtn.classList.add('btn-outline');
                    authBtn.href = 'login.html';
                }
            }

            authBtn.addEventListener('click', function (e) {
                const user = getCurrentUser();
                if (user && user.email) {
                    e.preventDefault();
                    clearCurrentUser();
                    refreshAuthUI();
                    const result = document.getElementById('result');
                    result.innerHTML = '<strong>Signed out</strong>';
                    result.className = 'result show safe';
                    setTimeout(() => { result.className = 'result'; result.innerHTML = ''; }, 1400);
                }
            });

            document.addEventListener('DOMContentLoaded', refreshAuthUI);
        })();
    </script>
</body>
</html>
